<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Getting Started — Ato Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./docs.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 border-b border-[var(--border)]">
    <div class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
      <div class="flex items-center gap-8">
        <a href="./index.html" class="flex items-center gap-2 font-semibold text-lg">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
            <rect width="28" height="28" rx="6" fill="var(--fg)"/>
            <path d="M8 14L14 8L20 14L14 20L8 14Z" fill="white"/>
          </svg>
          <span>Ato Store</span>
        </a>
        <div class="hidden md:flex items-center gap-6">
          <a href="./index.html" class="text-sm text-[var(--fg-secondary)] hover:text-[var(--fg)] transition-colors">Docs</a>
          <a href="./getting-started.html" class="text-sm font-medium text-[var(--fg)]">Getting Started</a>
          <a href="./cli-reference.html" class="text-sm text-[var(--fg-secondary)] hover:text-[var(--fg)] transition-colors">CLI</a>
        </div>
      </div>
      <div class="flex items-center gap-3">
        <a href="./future-roadmap.html" class="text-sm font-medium text-[var(--fg-secondary)] hover:text-[var(--fg)] transition-colors">Sign In</a>
        <a href="./publish-guideline.html" class="bg-[var(--fg)] text-white text-sm font-medium px-4 py-2 rounded-lg hover:bg-[#262626] transition-colors">Publish</a>
      </div>
    </div>
  </nav>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-title">Documentation</div>
      <a href="./index.html" class="sidebar-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        Overview
      </a>
      <a href="./getting-started.html" class="sidebar-link active">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>
        Getting Started
      </a>
      <a href="./core-concepts.html" class="sidebar-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
        Core Concepts
      </a>
      <a href="./cli-reference.html" class="sidebar-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="9" y1="9" x2="15" y2="15"/><line x1="15" y1="9" x2="9" y2="15"/></svg>
        CLI Reference
      </a>
      <a href="./publish-guideline.html" class="sidebar-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z"/><path d="m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10"/></svg>
        Publish Guideline
      </a>
      <a href="./future-roadmap.html" class="sidebar-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        Future Roadmap
      </a>
    </div>

    <div class="sidebar-section">
      <div class="sidebar-title">Primary Specs</div>
      <a href="../../docs/specs/CAPSULE_CLI_SPEC.md" class="sidebar-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
        CLI Spec
      </a>
      <a href="../../docs/specs/CAPSULE_SPEC.md" class="sidebar-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
        Capsule Spec
      </a>
      <a href="../../docs/specs/DRAFT_LIFECYCLE.md" class="sidebar-link">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
        Lifecycle
      </a>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="docs-content">
    <main class="docs-body">
      <article class="prose animate-fade-up">
        <h1>Getting Started</h1>
        <p class="lead">
          このページは <code>capsule-cli v0.3</code> と
          <code>LIFECYCLE_SPEC v1.2</code> を前提に、
          新しいCapsuleを作成して実行する最短ルートを示します。
        </p>

        <div class="quick-nav">
          <a href="#prerequisites" class="quick-nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            Prerequisites
          </a>
          <a href="#install-engine" class="quick-nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
            Engine Setup
          </a>
          <a href="#create-capsule" class="quick-nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
            Create
          </a>
          <a href="#run-and-validate" class="quick-nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
            Validate & Open
          </a>
          <a href="#pack-and-sign" class="quick-nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z"/></svg>
            Pack & Sign
          </a>
          <a href="#next-steps" class="quick-nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
            Next Steps
          </a>
        </div>

        <h2 id="prerequisites">1. Prerequisites</h2>
        <ul>
          <li><code>capsule</code> コマンドが利用可能であること</li>
          <li>ローカルに実行可能な作業ディレクトリ</li>
          <li>署名を使う場合は秘密鍵保存先（<code>~/.capsule/keys</code>）に書き込み可能であること</li>
        </ul>

        <div class="code-block-wrapper">
          <div class="code-block">
            <pre><span class="code-cmd">capsule</span> --help
<span class="code-cmd">capsule</span> engine features</pre>
          </div>
          <button class="code-copy" aria-label="Copy code">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
          </button>
        </div>

        <h2 id="install-engine">2. Engine Setup</h2>
        <p>
          Source runtime を使う標準手順は <code>capsule setup --engine nacelle</code> です。
          既存のバイナリを使う場合は <code>capsule engine register</code> を使います。
        </p>

        <div class="code-block-wrapper">
          <div class="code-block">
            <pre><span class="code-cmd">capsule</span> setup --engine nacelle
<span class="code-cmd">capsule</span> engine register --name nacelle --path /usr/local/bin/nacelle --default</pre>
          </div>
          <button class="code-copy" aria-label="Copy code">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
          </button>
        </div>

        <h2 id="create-capsule">3. Create a New Capsule</h2>
        <p>
          テンプレート生成は <code>capsule new</code> を使用します。
          指定可能テンプレートは <code>python|node|hono|rust|go|shell</code> です。
        </p>

        <div class="code-block-wrapper">
          <div class="code-block">
            <pre><span class="code-cmd">capsule new</span> hello-capsule --template node
<span class="code-cmd">cd</span> hello-capsule</pre>
          </div>
          <button class="code-copy" aria-label="Copy code">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
          </button>
        </div>

        <p>最小の <code>capsule.toml</code>（Lifecycleショートカット）例:</p>
        <div class="code-block-wrapper">
          <div class="code-block">
            <pre><span class="code-key">schema_version</span> = <span class="code-str">"1.1"</span>
<span class="code-key">name</span> = <span class="code-str">"hello-capsule"</span>
<span class="code-key">version</span> = <span class="code-str">"0.1.0"</span>
<span class="code-key">type</span> = <span class="code-str">"app"</span>

<span class="code-pkg">[lifecycle]</span>
<span class="code-key">run</span> = <span class="code-str">"node index.js"</span>
<span class="code-key">port</span> = <span class="code-str">3000</span>
<span class="code-key">health_check</span> = <span class="code-str">"/health"</span></pre>
          </div>
          <button class="code-copy" aria-label="Copy code">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
          </button>
        </div>

        <div class="info-box warning">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <div class="content">
            <div class="title">schema_version について</div>
            <p>
              <code>CAPSULE_SPEC.md</code> では <code>1.0</code>、
              <code>DRAFT_LIFECYCLE.md</code> では <code>1.1</code> 例が併記されています。
              最終的には <code>capsule validate</code> が通る値を優先してください。
            </p>
          </div>
        </div>

        <h2 id="run-and-validate">4. Validate and Run</h2>
        <div class="steps">
          <div class="step">
            <h3>Validate manifest</h3>
            <p><code>capsule validate .</code> で構文/意味/IPC衝突のチェックを行います。</p>
          </div>
          <div class="step">
            <h3>Run capsule</h3>
            <p><code>capsule open .</code> で <code>capsule.toml</code> を実行します。</p>
          </div>
          <div class="step">
            <h3>Monitor process</h3>
            <p><code>capsule ps</code> / <code>capsule logs</code> / <code>capsule close</code> で管理します。</p>
          </div>
        </div>

        <div class="code-block-wrapper">
          <div class="code-block">
            <pre><span class="code-cmd">capsule</span> validate .
<span class="code-cmd">capsule</span> open . --watch
<span class="code-cmd">capsule</span> ps --all
<span class="code-cmd">capsule</span> logs --name hello-capsule --follow</pre>
          </div>
          <button class="code-copy" aria-label="Copy code">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
          </button>
        </div>

        <h2 id="pack-and-sign">5. Pack and Sign</h2>
        <p>
          配布には <code>.capsule</code> を作成し、Ed25519鍵で署名します。
          署名後アーティファクトは公開フローやCIで再利用できます。
        </p>

        <div class="code-block-wrapper">
          <div class="code-block">
            <pre><span class="code-cmd">capsule</span> pack . --init
<span class="code-cmd">capsule</span> keygen --out ~/.capsule/keys/default.pem
<span class="code-cmd">capsule</span> sign ./dist/hello-capsule.capsule --key ~/.capsule/keys/default.pem</pre>
          </div>
          <button class="code-copy" aria-label="Copy code">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
          </button>
        </div>

        <h2 id="next-steps">Next Steps</h2>
        <ul>
          <li>manifest と lifecycle の詳細は <a href="./core-concepts.html">Core Concepts</a> を参照</li>
          <li>コマンドオプション詳細は <a href="./cli-reference.html">CLI Reference</a> を参照</li>
          <li>Store公開手順は <a href="./publish-guideline.html">Publish Guideline</a> を参照</li>
        </ul>

        <div class="nav-cards">
          <a href="./index.html" class="nav-card prev">
            <svg class="arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"/>
            </svg>
            <div>
              <div class="label">Previous</div>
              <div class="title">Documentation Index</div>
            </div>
          </a>
          <a href="./core-concepts.html" class="nav-card next">
            <div>
              <div class="label">Next</div>
              <div class="title">Core Concepts</div>
            </div>
            <svg class="arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </a>
        </div>

        <p class="page-footer">Source specs: CAPSULE_CLI_SPEC v0.3, DRAFT_LIFECYCLE v1.2.</p>
      </article>
    </main>

    <!-- TOC Sidebar -->
    <aside class="toc-sidebar">
      <div class="toc-title">On this page</div>
      <nav>
        <a href="#prerequisites" class="toc-link">Prerequisites</a>
        <a href="#install-engine" class="toc-link">Engine Setup</a>
        <a href="#create-capsule" class="toc-link">Create</a>
        <a href="#run-and-validate" class="toc-link">Validate & Open</a>
        <a href="#pack-and-sign" class="toc-link">Pack & Sign</a>
        <a href="#next-steps" class="toc-link">Next Steps</a>
      </nav>
    </aside>
  </div>

  <script src="./docs.js"></script>
</body>
</html>
